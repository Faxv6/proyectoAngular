<div class="new-contact-page-bg">
    <div id="container" class="card">
        @if(isEditMode){
        <h2>Editar contacto</h2>
        } @else {
        <h2>Nuevo contacto</h2>
        }

        <form (ngSubmit)="handleFormSubmission(newContactForm)" #newContactForm="ngForm">
            <div>
                <label for="first-name">Nombre*</label>
                <input id="first-name" name="firstName" type="text" ngModel required="true" minlength="2" maxlength="20"
                    #firstName="ngModel" [disabled]="isLoading">
                @if (firstName.dirty && firstName.invalid) {
                <p class="error">El nombre es obligatorio y no puede ser una sola letra</p>
                }
            </div>

            <div>
                <label for="last-name">Apellido</label>
                <input id="last-name" name="lastName" type="text" ngModel maxlength="20" [disabled]="isLoading">
            </div>

            <div>
                <label for="phone">Telefono*</label>
                <input id="phone" name="number" type="text" ngModel required="true" minlength="3" maxlength="30"
                    #phone="ngModel" [disabled]="isLoading">
                @if (phone.dirty && phone.invalid) {
                <p class="error">El teléfono es obligatorio (mínimo 3 caracteres)</p>
                }
            </div>

            <div>
                <label for="email">Email</label>
                <input id="email" name="email" type="email" ngModel maxlength="40" [disabled]="isLoading">
            </div>

            <div>
                <label for="favourite">Favorito</label>
                <input id="favourite" name="isFavourite" type="checkbox" ngModel [disabled]="isLoading">
            </div>

            <div>
                <label for="address">Direccion</label>
                <input id="address" name="address" type="text" ngModel minlength="5" [disabled]="isLoading">
            </div>

            <div>
                <label for="company">Companía</label>
                <input id="company" name="company" type="text" ngModel minlength="2" [disabled]="isLoading">
            </div>

            <div>
                <label for="image">URL Imagen</label>
                <input id="image" name="image" type="text" ngModel minlength="10" [disabled]="isLoading">
            </div>

            @if (errorEnBack) {
            <p class="error">Error indeterminado, intente nuevamente.</p>
            }

            <!-- Botón con spinner integrado -->
            @if(isEditMode){
            <button [disabled]="newContactForm.invalid || isLoading" class="btn-edit">
                @if(isLoading) {
                <app-spinner></app-spinner>
                <span>Editando...</span>
                } @else {
                <span>Editar</span>
                }
            </button>
            } @else {
            <button [disabled]="newContactForm.invalid || isLoading" class="btn-create">
                @if(isLoading) {
                <app-spinner></app-spinner>
                <span>Creando...</span>
                } @else {
                <span>Crear</span>
                }
            </button>
            }
        </form>
    </div>
</div>